---
title: "Anthem"
categories:
  - htb
tags:
  - HackTheBox
---

## Summary
https://tryhackme.com/room/anthem
I want to approach tryhackme challenges in two ways:
- Skills test - closed book conditions
- Learning opportunity - google for assistance with triaging tooling, opportunity for upskilling, open book conditions

In this case I'll be doing this with an open book approach.

## Recon and thought process for answering
I have minimal exposure to nmap, in this write up I'll just be writing questions/answer and fact finding/triage.

Part 1: Website Analysis
1. Let's run nmap and check what ports are open.
No answer needed.

2. What port is for the web server
nmap <host ip> - I should probably find a better "one size fits all" for doing these.
Web server (http) is hosted on 80

3. What port is for the remote desktop service?
nmap shows this running on 3389 (ms-wbt-server)

4. What is a possible password in one of the pages web crawlers check for?
I did google this and found out the standard file name that's used for web crawlers to receive instructions is robots.txt
Navigating to the https://target-ip/robots.txt gave me the answer I was looking for.

5. What CMS is the website using?
robots.txt gave me soe dirs which I looked into (umbraco and umbraco_client) which gave me the answer.

6. What is the domain of the website?
It's listed on homepage of the webpage

7. What's the name of the administrator?
I googled the poem that was posted on a blog post which gave me a name from a nursery rhyme.

8. Can we find the email of the administrator?
A blog post on website gave mean indication of what the email structure is, and applied the initials of the admin.

Part 2: Spot the flags
Anthem are hiring!

1. What is flag 1:
I inspected the we are hiring page to find the first answer.

2. What is flag 2:
I just searched within inspect element to find this.

3. What is flag 3:
I got stuck and used the hint on the challenge, which led me to the posters profile. This shown me that I needed to start checking the metadata of all the pages to find the answers.

4. What is flag 4: 
Found this through metadata of the IT department post.

Final Stage:

1. Let's figure out the username and password to log in to the box.(The box is not on the domain)
A potential password was found in the initial triage (task 1) and we have the administrators email/username. I was able to login to the Umbraco CMS with this.
2. Gain initial access to the machine, what is the contents of user.txt
I tried SSHing into this but couldn't, and remember it has a windows rdp port running on it. Remmina is on the machine and I was able to login to the windows VM with the credentials I used to login to the CMS.
3. Can we spot the admin password?
There's a hidden dir in C:\ with a file named restore. Accessing it gave me errors so I looked at the file permissions where it had permissions set that nobody could access it, I added 'sg' as full access.
4. Escalate your privileges to root, what is the contents of root.txt?
I navigated through to the user profile of administrator and elevated with their credentials, and found root.txt which I could open.

## Takeaways
This was fun and although classified as easy, I think tasks like this help me shift into the mindset of triaging and understanding tools, triggers etc abit more. I do feel like with flag finding I did just repeat what worked the first time in other pages, while it worked it was just like brute forcing it. Although it did remind me to look at meta data, the logic of "just clicking every page and searching" didn't feel like I learned of any patterns to look for etc.

## Follow up
Find out the best way to nmap open ports for the sake of these challenges.